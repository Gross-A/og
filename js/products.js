const products = { 
    // "products": {
        "women": [
                {
                    "id": "1",
                    "name": "Капор",
                    "image": "image_1.jpg",
                    "modal-image": "./assets/images/store/women/1.jpg",
                    "card-text": "головной убор в виде капюшона (возможен вариант с округлой макушкой или с классическим прямым углом",
                    "card-text full": "этот головной убор бесспорный лидер сезона. Он подойдет как к деловому образу, так и к спортивному. Для изготовления берется только высококачественная пряжа производства Италия",
                    "size range": "от 50 до 58",
                    "consist": "90% пух норки, 10% полиамид",
                    "season": "демисезон/ зима",
                    "price": "3500"
                },
                {
                    "id": "2",
                    "name": "Ушанка",
                    "image": "image_2.jpg",
                    "modal-image": "./assets/images/store/women/2.jpg",
                    "card-text": "Зимний теплый вариант шапки с 'ушками' (может быть с завязками или без них)",
                    "card-text full": "крайне популярный в последние сезоны головной убор для девушек, привелкающий взгляды своим необычным видом",
                    "size range": "от 50 до 58",
                    "consist": "90% пух норки, 10% полиамид",
                    "season": "демисезон/ зима",
                    "price": "4000"
                },
                {
                    "id": "3",
                    "name": "Повязка",
                    "image": "image_3.jpg",
                    "modal-image": "./assets/images/store/women/3.jpg",
                    "card-text": "стильная вязанная повязка",
                    "card-text full": "может быть прямая или с бантиком, любой ширины в соответствии с пожеланиями",
                    "size range": "от 50 до 58",
                    "consist": "100% меринос/ 90% пух норки, 10% полиамид",
                    "season": "демисезон/ зима",
                    "price": "4000"
                },
                {
                    "id": "4",
                    "name": "Шапка - луковка",
                    "image": "image_4.jpg",
                    "modal-image": "./assets/images/store/women/4.jpg",

                    "card-text": "Модель шапки с вытянутой в виде спирали макушкой (с отворотом и без него)",
                    "card-text full": "Шапка подойдет под любой образ - спортивный, классический. \nМожно отрегулировать высоту шириной заворота",
                    "size range": "от 50 до 58",
                    "consist": "100% меринос",
                    "season": "демисезон/ зима",
                    "price": "4000"
                },
                {
                    "id": "5",
                    "name": "Шапка - тыковка",
                    "image": "image_5.jpg",
                    "modal-image": "./assets/images/store/women/5.jpg",

                    "card-text": "модель шапки со стянутой макушкой (с отворотом или без него)",
                    "card-text full": "пдлофвадфоафдоаф",
                    "size range": "от 50 до 58",
                    "consist": "100% меринос",
                    "season": "демисезон/ зима",

                    "price": "4000"
                },
                {
                    "id": "6",
                    "name": "Шапка - бини",
                    "image": "image_6.jpg",
                    "modal-image": "./assets/images/store/women/6.jpg",

                    "card-text": "описание бини ",
                    "card-text full": "пдлофвадфоафдоаф",
                    "size range": "от 50 до 58",
                    "consist": "100% меринос/ 90% пух норки, 10% полиамид",
                    "season": "демисезон/ зима",
                    "price": "4000"
                },
            ],
        "man": [
            {
                "id": "1",
                "name": "Шапка - бини",
                "image": "image_1.jpg",
                "modal-image": "./assets/images/store/men/1.jpg",

                "card-text": "тралялялялялялялялялялялялял",
                "card-text full": "ghjsdfjlasjfa;ljlajfd;lsfj;lajdf",
                "price": "3500"
            },
            {
                "id": "2",
                "name": "Шапка - кпье",
                "image": "image_1.jpg",
                "modal-image": "./assets/images/store/men/2.jpg",

                "card-text": "тралялялялялялялялялялялялял",
                "card-text full": "ghjsdfjlasjfa;ljlajfd;lsfj;lajdf",
                "price": "3500"
            },

        ],
        "child": [
            {
                "id": "1",
                "name": "Шапка - эльф'",
                "image": "image_1.jpg",
                "modal-image": "./assets/images/store/childs/1.jpg",

                "card-text": "Шапочка с заотсренным верхом в виде головного убоа сказочных Эльфов",
                "card-text full": "Шапка подойдет как мальчикам, так и девочкам.\nБольше подходит на осень, весну.",
                "price": "3500"
            },
            {
                "id": "2",
                "name": "Шапка - мишка",
                "image": "image_1.jpg",
                "modal-image": "./assets/images/store/childs/2.jpg",

                "card-text": "Шапка анатомического кроя с декоративными ушками на макушке.",
                "card-text full": "Очень милая шапочка, которая подойдет как мальчикам, так и девочкам. \nПодойдет и мальчикам и девочкам",
                "price": "3500"
            },
            {
                "id": "3",
                "name": "Анатомическая шапка",
                "image": "image_3.jpg",
                "modal-image": "./assets/images/store/childs/3.jpg",

                "card-text": "Шапка для повседневной носки.",
                "card-text full": "Шапка предназначена для повседневной носки. Плотно прилегающие 'ушки' на заявязках обеспечат сохранность от продувания и замерзания ушек вашлего малыша",
                "price": "3500"
            },
            {
                "id": "4",
                "name": "Луковка на завязках",
                "image": "image_4.jpg",
                "modal-image": "./assets/images/store/childs/4.jpg",

                "card-text": "тралялялялялялялялялялялялял",
                "card-text full": "ghjsdfjlasjfa;ljlajfd;lsfj;lajdf",
                "price": "3500"
            },
            {
                "id": "5",
                "name": "Горошковая шапка",
                "image": "image_5.jpg",
                "modal-image": "./assets/images/store/childs/5.jpg",

                "card-text": "Анатомическая шапка с декортивными элементами",
                "card-text full": "Очень милая шапочка, больше подходящая девочкам",
                "price": "3500"
            },
            {
                "id": "6",
                "name": "Ушанка",
                "image": "image_6.jpg",
                "modal-image": "./assets/images/store/childs/6.jpg",

                "card-text": "Теплая шапка с ушами, подходящая для низких температур",
                "card-text full": "Подходит для подростоков. Придает изысканность любому образу - буть то спортивный или классический",
                "price": "3500"
            },
            {
                "id": "7",
                "name": "Шапочка для новорожденных",
                "image": "image_7.jpg",
                "modal-image": "./assets/images/store/childs/7.jpg",

                "card-text": "тралялялялялялялялялялялялял",
                "card-text full": "ghjsdfjlasjfa;ljlajfd;lsfj;lajdf",
                "price": "3500"
            },
            {
                "id": "8",
                "name": "Носочки",
                "image": "image_8.jpg",
                "modal-image": "./assets/images/store/childs/8.jpg",

                "card-text": "Очень теплые носочки любого размера и расцветки",
                "card-text full": "Носочки любого назначения в зависимости от выбранной пряжи",
                "price": "3500"
            },
            {
                "id": "9",
                "name": "Пинетки",
                "image": "image_1.jpg",
                "modal-image": "./assets/images/store/childs/9.jpg",

                "card-text": "Вязанные тапочки для малышек, только пявившихся на свет",
                "card-text full": "Предназначены для согревания ножек самых маленьких и дорогих членов ваших семей",
                "price": "3500"
            },
            {
                "id": "10",
                "name": "Варежки",
                "image": "image_10.jpg",
                "modal-image": "./assets/images/store/childs/10.jpg",

                "card-text": "Варежки для детей любого возраста",
                "card-text full": "в зависимости от размера подойдут как новорожденным, так и детям среднего возраста",
                "price": "3500"
            },
            {
                "id": "11",
                "name": "Шарф",
                "image": "image_11.jpg",
                "modal-image": "./assets/images/store/childs/11.jpg",

                "card-text": "аксессуар для защиты горлышка вашего ребенка",
                "card-text full": "можно подобрать любую длину и пряжу",
                "price": "3500"
            },
            {
                "id": "12",
                "name": "Снуд",
                "image": "image_12.jpg",
                "modal-image": "./assets/images/store/childs/12.jpg",

                "card-text": "тралялялялялялялялялялялялял",
                "card-text full": "ghjsdfjlasjfa;ljlajfd;lsfj;lajdf",
                "price": "3500"
            },
            {
                "id": "13",
                "name": "Боди",
                "image": "image_13.jpg",
                "modal-image": "./assets/images/store/childs/13.jpg",

                "card-text": "тралялялялялялялялялялялялял",
                "card-text full": "ghjsdfjlasjfa;ljlajfd;lsfj;lajdf",
                "price": "3500"
            },
            {
                "id": "14",
                "name": "Кардиган",
                "image": "image_14.jpg",
                "modal-image": "./assets/images/store/childs/14.jpg",

                "card-text": "тралялялялялялялялялялялялял",
                "card-text full": "ghjsdfjlasjfa;ljlajfd;lsfj;lajdf",
                "price": "3500"
            },
            {
                "id": "15",
                "name": "Комбинезон",
                "image": "image_15.jpg",
                "modal-image": "./assets/images/store/childs/15.jpg",

                "card-text": "тралялялялялялялялялялялялял",
                "card-text full": "ghjsdfjlasjfa;ljlajfd;lsfj;lajdf",
                "price": "3500"
            },
            {
                "id": "16",
                "name": "Свитер",
                "image": "image_16.jpg",
                "modal-image": "./assets/images/store/childs/16.jpg",

                "card-text": "тралялялялялялялялялялялялял",
                "card-text full": "ghjsdfjlasjfa;ljlajfd;lsfj;lajdf",
                "price": "3500"
            },
        ]
        }

// *************** открытие бургер меню

const burgerLogo = document.querySelector('.burger');
const burgerMenu = document.querySelector('.burger-menu');
// const needle2 = document.getElementById('needle_2');
const needles = document.querySelectorAll('.needle');

console.log(burgerMenu)


burgerLogo.addEventListener('click', () => {
    console.log('burger');
    console.log(burgerMenu.classList)
    burgerMenu.classList.toggle('open')
    // needle2.classList.toggle('close');
    needles.forEach(el => {
        el.classList.toggle('close');
    })
})

// *******************************************
const womenImageSourse = "assets/images/store/women/"; //переменная описывающая путь к поддиректориям с фото шапок из разделf женщины
const childImageSourse = "assets/images/store/child/"; //переменная описывающая путь к поддиректориям с фото шапок из разделf женщины
const manImageSourse = "assets/images/store/men/"; //переменная описывающая путь к поддиректориям с фото шапок из разделf женщины
const womenButton = document.querySelector('.women');
const childButton = document.querySelector('.child');
const productsCards = document.querySelector('.products__cards');
const productsMenu = document.querySelector('.products__menu');
// const cardOfProduct = document.querySelectorAll('.product-card');


// новый вариант создагия карточки товара 13.11.22

function createCard (nameClass, element, i) {

    let card = document.createElement('div');
    card.classList.add('product-card');
    productsCards.appendChild(card);
    card.id = `${element} ${nameClass[element][i]["id"]}`;
    card.insertAdjacentHTML('afterbegin', `
        <div class="card__image">
            <img src=${nameClass[element][i]["modal-image"]} class="product-image">
        </div>
        <div class="card__info">
        <div class="card__title">
            <h3> ${nameClass[element][i]["name"]} </h3>
        </div>
        <div class="card__subtitle">
            <h5> ${nameClass[element][i]["card-text"]} </h5>
        </div>
        <div class="card__price">
            <p class="price__title">Цена от:  </p>
            <p class="price__value">
            <h5> ${nameClass[element][i]["price"]} </h5>
            </p>
            <p class="price__currency">   рубл.</p>
        </div>
    `)
    return card
}


// => новый вариант йункции создания поля карточек
function createFieldOfCards(e) { // e - это событие клик 15.11 убрал из аргументов колбэк
    let count = 0;
    let chapterName = e.target.classList.value;
    switch (chapterName) {
        case "women":
        case "man":
        case "child":
            count = products[chapterName].length - 1;
            // document.querySelector('.products__cards').innerHTML = ""; //15.11
            productsCards.innerHTML = "";  
 
            console.log(count);
            for (let i=0; i <= count; i++) {
                createCard(products, chapterName, i);
            }
            break;

    }

    // callback(); 15.11
}
let start = true
// ********функция создания стартового поля с 6 карточкамим по две из каждой категории

function createStartFieldOfCard() {
    let category = ['women', 'man', 'child']
    // if (start == true) {
    for (let i=0; i < category.length; i++) {
        for (let j=0; j < 2; j++){
            createCard(products, category[i], j)
        }
        // }
    }
    return start = false
}

if (start == true) {
    createStartFieldOfCard()
}

// ********** создание колбэка для октрытия модального окна закомментировал 15.11 для пробы кода ниже
// function chuseCard() {
//     // let cardOfProduct = document.querySelectorAll('.product-card');// was 'const'
//     const cardOfProduct = document.getElementsByClassName('product-card'); //*temp
//     console.log(cardOfProduct)

//     cardOfProduct.forEach(element => {
//         // console.log(element);
//         element.addEventListener('click', openModal)
        
//     })
// }

// **********вариант распознавания клика именно на карточке товара и открытие модального окна при этом клике  15.11.22 - проверил, рабочая схема но нужно потом сделать рефакторинг (посмотреть видео про модули у Владилена)
productsCards.addEventListener('click', (event) => {
    let prodCart = event.target.closest('.product-card')
    if (!prodCart) return;
    if (!productsCards.contains(prodCart)) return;
    let productsCategoryName = prodCart.id.split(' ')[0];
    let productIdName = prodCart.id.split(' ')[1];

    console.log(productsCategoryName);
    console.log(productIdName);

    console.log (products[productsCategoryName][productIdName - 1]["name"])

    _createModal(products, productsCategoryName, productIdName); //*temp добавил 15.11 для проверки открытия модала по клику на карточку товара
    const modalProduct = document.querySelector('.modal-product');
    modalProduct.classList.add('open');
    closeModal();//*temp 15.11
})

//./assets/images/store/women/1.png"


// *******************
// создание модалки при клике на карту товара

function _createModal(products,nameCategory, numberOfProduct) { //*temp было _createModal(options)
    const modalProduct = document.querySelector('.modal-product');
    modalProduct.insertAdjacentHTML('afterbegin', `
        <div class="modal__background">
            <div class="modal__card">
                <img src="${products[nameCategory][numberOfProduct-1]["modal-image"]}" alt="" class="modal__image">
                <div class="modal__subscribe">
                    <div class="modal__title">
                        <h2>${products[nameCategory][numberOfProduct-1]["name"]}</h2>
                    </div>
                    <div class="modal__subtitle">
                        <h4>${products[nameCategory][numberOfProduct-1]["card-text full"]}</h4>
                    </div>
                    <div class="modal__info">
                        <h4>Размерный ряд:</h4>
                        <p>&nbsp &nbsp &nbsp от 50 до 58</p>
                        <span class="modal__paragraph"></span> 
                    </div>
                    <div class="modal__info">
                        <h4>Состав:</h4>
                        <p>&nbsp &nbsp &nbsp 90% пух норки, 10% полиамид</p>
                        <span class="modal__paragraph"></span> 
                    </div>
                    <div class="modal__info">
                        <h4>Сезон:</h4>
                        <p>&nbsp &nbsp &nbsp демисезон/ зима</p>
                        <span class="modal__paragraph"></span> 
                    </div>


                    <!-- <p class="size-range">

                    </p>
                    <p class="compound"></p>
                    <p class="season"></p>  -->
                    <div class="modal__price">
                        <div class="modal__info">
                            <h4>Цена от:&nbsp &nbsp &nbsp</h4>
                            <h3> ${products[nameCategory][numberOfProduct-1]["price"]}</h3>
                            <p>&nbsp &nbsp &nbsp руб</p>
                            <span class="modal__paragraph"></span> 
                        </div>

                        <a href="products.html#contacts">
                            <div class="modal__button_order"> заказать</div>
                        </a>
                    </div>

                </div>

            </div>

        </div>

    `)
    return modalProduct
}

    
   

   
// }

//  сыбытие всплытия модалки при клике на карту товара
// $.modal = function(options) {
//     const $modalProduct = _createModal(options);
//     let closeStatus = false;
//     return {
//         open() {
//             if(!closeStatus) {
//                 $modalProduct.classList.add('open');
//             }
//         },
//         close() {
//             closeStatus = true;
//             $modalProduct.classList.remove('open');
//             closeStatus = false;
//         },
//         destroy() {},
//     }
// }

// ************открытие модального окна при нажатии на карточку. 15.11 - не в работе, т.к. сделал внутри другой функции

function openModal() {
            const modalProduct = _createModal();
            console.log(modalProduct);// создал 15.11 для проверки что присвоилось modalProduct после выполнения функции
            // modalProduct.classList.add('open');
            // closeModal();//*temp  закомментировал 15.11
}

// ********** закрытие модального окна при нажатии на фон + удаление HTML внутри коонтейнера .modal-product
function closeModal() {
    const modalBackground = document.querySelector('.modal__background');
    const modalProduct = document.querySelector('.modal-product');
    modalBackground.addEventListener('click', ()=> {
        modalProduct.classList.remove('open');
        modalProduct.innerHTML = ""
        console.log('work closeModal');
    })
}

              

// слушатель события клик по кнопке меню (выбора подкатегории)

productsMenu.addEventListener('click',(event) => {
    console.log('events')
    // createFieldOfCards(event, chuseCard);//*temp 15.11
    createFieldOfCards(event);//*temp 15.11

});
